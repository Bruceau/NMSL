function isEmojiChar(e){return null==regex.exec(e)?null!=regex.exec(e)&&-1==e.search(/[\u{4e00}-\u{9fa5}_a-zA-Z0-9]/gu):-1==e.search(/[\u{4e00}-\u{9fa5}_a-zA-Z0-9]/gu)}function loading(){Object.keys(sj).forEach(function(key){sy[pinyinUtil.getPinyin(key,"",!1,!0)+""]=key,!ifEmoji(sj[key])&&isEmojiChar(sj[key])?eval("delete bfl."+key):bfsy[pinyinUtil.getPinyin(key,"",!1,!0)+""]=key})}function addProcess(){kuan++,eval('$("#p1").width("'+20*kuan+'%")'),kuan>=5&&(loading(),$("#p1").hide(),changes())}function livere(){var e,n,i,t;k1&&(e=document,n="script",t=e.getElementsByTagName(n)[0],"function"!=typeof LivereTower&&(i=e.createElement(n),i.src="https://cdn-city.livere.com/js/embed.dist.js",i.async=!0,t.parentNode.insertBefore(i,t)),k1--)}function changes(){var e="";if(console.log(index,1),0==index){var n=$("#t").val(),t=segmentit.doSegment(n),s=sj,c=sy;if(1==$("input[id='checklook']").is(":checked")&&(s=bfl,c=bfsy),console.log(t),"1"==$("input[name='group1']:checked").val())for(i=0,len=t.length;i<len;i++){var a=t[i].w.trim();if(void 0!==s[a])e+=s[a];else if(a.length>0)for(characters=a.split(""),j=0,wlen=characters.length;j<wlen;j++)void 0!==s[characters[j]]?e+=s[characters[j]]:e+=characters[j];else e+=a}else for(i=0,len=t.length;i<len;i++){a=t[i].w.trim();var o=s[a];if(void 0!==o)e+=s[a];else if(void 0===o){var r=pinyinUtil.getPinyin(a,"",!1,!0);if(void 0!==c[r])e+=s[c[r]];else if(a.length>0)for(characters=a.split(""),j=0,wlen=characters.length;j<wlen;j++){var d=characters[j];if(void 0!==s[d])e+=s[d];else{var l=pinyinUtil.getPinyin(d,"",!1,!0);void 0!==c[l]?e+=s[c[l]]:e+=d}}else e+=a.trim()}}1==$("input[id='checkda']").is(":checked")&&(e=e.replace(/大/g,"带")),1==$("input[id='checkai']").is(":checked")&&(e=e.replace(/💓/g,"i")),1==$("input[id='checkye']").is(":checked")&&(e=e.replace(/我/g,"👴"))}else 1==index&&(e=1!=$("input[id='zhadd']").is(":checked")?$("#t1").val().split("").join(" "):$("#t1").val().replace(/([\u4e00-\u9fa5])/g," $1 ").replace(/  /g," ").trim());$("#res").text(e),$("#copy").attr("data-clipboard-text",e)}function onDemandScript(e,n){n=void 0!==n?n:{},$.ajax({type:"GET",url:e,success:n,dataType:"script",cache:!0})}var sj={},segmentit,regex;-1!=window.location.href.indexOf("gitee")&&$("body").addClass("mdui-theme-primary-red mdui-theme-accent-red");var inst=new mdui.Tab("#tab"),index=0;document.getElementById("tab").addEventListener("change.mdui.tab",function(e){index=e._detail.index});const getTextFeature=(e,n)=>{try{const i=document.createElement("canvas");i.width=2,i.height=2;const t=i.getContext("2d");t.textBaseline="top",t.font="100px sans-serif",t.fillStyle=n,t.scale(.01,.01),t.fillText(e,0,0);const s=t.getImageData(0,0,2,2).data,c=[];for(let e=0;e<s.length;e++)c[e]=s[e];return c.reduce((e,n)=>e+n,0)>0&&c.toString()}catch(e){return!1}},distribute=(e,n)=>{const i=getTextFeature(e,"#000");return n?i&&i===getTextFeature(e,"#FFF"):i},ifEmoji=e=>{const n=distribute("😁");return distribute(e,n)};var bfl=Object.assign({},sj),bfsy={},sy={},kuan=0,k1=1,done=!0;$("#up").click(function(){done?$.getJSON("src/data/emoji.json",function(e){sj=e,$("#te").hide(),$("#p2").show(),t=0,onDemandScript("https://cdn.jsdelivr.net/gh/gaowanliang/p/segmentit.js",function(){console.log("segmentit.js done");const{Segment:e,useDefault:n}=require("segmentit");segmentit=n(new e),addProcess()}),onDemandScript("https://cdn.jsdelivr.net/gh/gaowanliang/p/emoji-regex.js",function(){console.log("emoji-regex.js done");const e=require("emoji-regex");regex=e(),addProcess()}),onDemandScript("https://cdn.jsdelivr.net/gh/sxei/pinyinjs/dict/pinyin_dict_withtone.min.js",function(){console.log("pinyin_dict_withtone.min.js done"),addProcess()}),onDemandScript("https://cdn.jsdelivr.net/gh/sxei/pinyinjs/dict/pinyin_dict_polyphone.min.js",function(){console.log("pinyin_dict_polyphone.min.js done"),addProcess()}),onDemandScript("https://cdn.jsdelivr.net/gh/sxei/pinyinjs/pinyinUtil.min.js",function(){console.log("pinyinUtil.min.js done"),addProcess()}),done--}):changes()});var clipboard=new ClipboardJS("#copy");clipboard.on("success",function(e){mdui.snackbar({message:"复制成功"})}),clipboard.on("error",function(e){mdui.snackbar({message:"复制失败，用其他浏览器试试？"})});